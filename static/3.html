<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="generic.css">
</head>

<body>
    <h1>Crop:</h1>
    <form>
        <h3>Get Crop</h3>
        <label for="getCropType">Enter type:</label>
        <input type="text" id="getCropType" name="getCropType">
        <button type="submit" id="submitButton">Submit</button>
        <p id="getDisplayCrop"></p>
    </form>
    <hr />
    <form id="deleteCrop">
        <h3>Delete Crop</h3>
        <label for="deleteCropType">Enter type:</label>
        <input type="text" id="deleteCropType" name="deleteCropType">
        <button type="submit" id="submitButton">Submit</button>
    </form>
    <hr />
    <form id="createCrop">
        <h3>Create/update Crop</h3>

        <label for="updateCropCheck">updating?(specify if you're updating crop):</label>
        <input type="checkbox" id="updateCropCheck" name="updateCropCheck">

        <label for="createCropType">Type:</label>
        <input type="text" id="type" name="createCropType" required>

        <label for="basePrice">Base Price:</label>
        <input type="text" id="basePrice" name="basePrice" required>

        <label for="phRangeWeight">pH Range Weight:</label>
        <input type="text" id="phRangeWeight" name="phRangeWeight" required>

        <label for="phRangeDesired">pH Range Desired:</label>
        <input type="text" id="phRangeDesired" name="phRangeDesired" required>

        <label for="waterNeededWeight">Water Needed Weight:</label>
        <input type="text" id="waterNeededWeight" name="waterNeededWeight" required>

        <label for="waterNeededDesired">Water Needed Desired:</label>
        <input type="text" id="waterNeededDesired" name="waterNeededDesired" required>

        <label for="sunRangeWeight">Sun Range Weight:</label>
        <input type="text" id="sunRangeWeight" name="sunRangeWeight" required>

        <label for="sunRangeDesired">Sun Range Desired:</label>
        <input type="text" id="sunRangeDesired" name="sunRangeDesired" required>

        <label for="banned">Banned:</label>
        <input type="text" id="banned" name="banned" required>

        <button type="submit">Submit</button>
    </form>
</body>
<script>
    // Add event listener to the button
    document.getElementById("submitButton").addEventListener("click", function () {
        fetch(`http://localhost:3000/crop/${document.getElementById('getCropType').value}`)
            .then(response => response.text())
            .then(data => {
                document.getElementById("getDisplayCrop").innerText = data;
            })
            .catch(error => {
                console.error("Error:", error);
            });
    });

    document.getElementById("deleteCrop").addEventListener("submit", function (event) {
        event.preventDefault();
        fetch(`http://localhost:3000/crop/${document.getElementById('deleteCropType').value}`, {
            method: 'DELETE',
        })
            .then(response => response.text())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    });

    document.getElementById("createCrop").addEventListener("submit", function (event) {
        event.preventDefault();
        const formData = new FormData(document.getElementById("createCrop"));
        const cropData = Object.fromEntries(formData.entries());
        fetch(cropData.updateCropCheck ?
            `http://localhost:3000/crop/${cropData.createCropType}` :
            `http://localhost:3000/crop`, {
            method: cropData.updateCropCheck ? 'PUT' : 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(cropData)
        })
            .then(response => response.text())
            .then(data => {
                console.log("Crop created/updated:", data);
                // Handle success or display a success message
            })
            .catch(error => {
                console.error("Error:", error);
            });
    });
</script>

</html>